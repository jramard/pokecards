workflows:
  ionic-capacitor-android-workflow:
    name: Ionic Capacitor Android Workflow
    max_build_duration: 120
    instance_type: mac_mini
    environment:
      vars:
        # Android Keystore environment variables
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmd6R0ZLejZPbVlzcXRiWWNxNEJjTVZYU0NMSVFrYVVFREZsOEIwNEcyU0VraFMtMnhjMWJqNG1TZGdKVEJITEFVS0FPSUdpeGd3YlBLNk9wWmUzRGkyN1VJdXhHd0J4Tnpka09ndS1yVmVGb2N0VHJVQWxuVER6bDZmV1RmS0Rnc0xJV19aakJaTGZjNmRRRmUtTFhydmN1RnRjWkZyNTJ0T2tQQXZOLTJGWHNFYTRsTy1nOFp6SHNLS0wtODFDS0QtRTZnOUQ2QXI5SzRXWlp0MHk5Y0MtbGNqLVdKZDJQamtlYmNKUzJMLXhpRWJVTHh4YjJyYjdIcFJDaEJ1c29yUkZDUTJsR3loeTlWaE1pcWE2VTVQWmNadUVkTzBmejBoSURzQ3RXVDFmdERHS2VVYXVURlFHWWNUZjRpM1Z5X2lUdE5hTzFtODZ6Smp3bWJ4Nmhvby14VFpwaGRjRGFoaEd3NE9taGxJYS1za2gxQVNLSEx1WWp0ckJBdDBPRlBXdHVTOGJTNlRGWFFGNHlhT01xT1U2Nk8wTXVMMkV3bUJuZElPMHhGc0ZIMUQ0bXpDMUptX1pMVFdJdFltWENSaE96V05ueDZLclA2bmJmSkhLRF9pZVJzSTFUdVhLR1FaUmxkZEdnRDdZczNUTzBSRkNVWlpKdTlGX3V0Mk9VSHkzcWludV92X0RrVjJYYzd1VlFrcWY0cXpIVGNkdDFhMFZ4YWQ5aVZ3UnBZQW5WSkpodzBlcGV2SmFnTk93ZlRGclcxYzFGT3VIMGxxOXRGYXROVlhjM1Vqa0FsTC1HOVVaUDRoTThxMFhCNDU2M2ZGUVdOU0hxMmRiQTVvbEctT1RPaWUwUm1xVm1sa0w4U096Vk9fenREVzZmcUYxMGVnVFp3RUFYUHhJamZ2ejc5d2FoQkU1SUJHRktOeXJHSVYzaElzaXh6RXZuQzhOcTRMdllPTmhBWE1oVUowVnBDbDkwSGtDcF9xOTZucXNWOFZrQzlDbmRCWVptM3EyaUQwSW1HSWxHSm9IOUhZQ1Y5TlRXa0tsOEVNT0ZfeVhtdUg2Q3VWRnBHTW9DRWQyNEphazhIZ0tIRnJlcFFWZVhYVVNDWnA5c04yZ0FoVkstRWJWbUNUazJuZWliTWhFTXlOalJrSU1nV3QzM3FWMmcwdTFQS1A5SlY1SjBKajBSV2pOVFYySVBpTHJPQ29oVC1mczZGM2tpRGpPeS1QTGVlUWlLS3lnNGZVbEJXTEw3MHVhRnFTLTRid0VSZ1FjbEdGTTNGOGhsYllNWlRiSVUtSDctYkRRcFEwVmE4S0tPTGwtVUVOTHJoeE9jLVMxeXBSamJYbGN2MG1Na3U1ZDU1N296eDBUYlVlSHJIU01BdUVVdjdEVmdJU1pEV2twTnFfLWZ5YVpLV3pKbFRGQ3J6amZ5VjBldG5qZjJ1cEFiODhiUWl3VUhXQUJseGdpZ3ZTX203T0txai1PUF9VbjFzV1N2d2lQbkZrRkJvMHgtZXJiRlU0a1dSREk0eEhEdzdiYzNpMU5LUUphcHl0ZE5yNks3dlRTUGp5elRicC00R0NZRy1vSFpLUHI1VVUxT0ZZUF9CTVFnRFFOSTNtRGtzeVNocE1FYUl4dWxFOFFsQnN4YXJLT2hxNG5nbUlyUGxxZUkwTlI0aU1KVDM2WWM4bXZjVjR3MTRWWlFVQ0hMUlk3c0dzdkMtd3FhRXN5YS1SZ19EeTR0SnppeWpBRTdEX0hxeWRoOFRVYUVZcXBWcWM0SVR0a2hHS0JONGhZdlQ0eldsT2Z5V1lZbVVQOXFvRFJWTTE3M2Rsc19oQlZCSWw2T2Z6LUdHSzhPVmp5MUJUS09RTlB4dWVIdG9BVGVVMVcxZTQ5ZFkzWjZtcW9ZWHozLUlFMUg5NHpDVTJoOTVMV3JCLWp2OGZ2YWJucmNzYnowcmNCRWhkS2J4UnhzQm5OYWc3bDJqYkNydlFBcDc4d2NEbERVeGxfOU1uVHlhT1Y4OEdRcmlsdW41MnlxOWdSS0ZTdkZWWXBjVDd0d3dVRDRuUUJqbmd1QVpISkxkd0JuU0lzbGhTcHNncnUyQVRKREF5WVNnT3BCVHRsM29HY1RvWk5ubFg4MXhydUpOVjJsN2p4QUtNTG94UC1jcEF6SDFJU00xeGt1S3ZTMFFGakhLTE9tSnZaYXBzSW81VklGVXpHc0tmRmxiVjhXdVNPZjVSLXloSzhYZTZiN0Y0Wk0wTGFKU21XYTNra1N0NWIyTFlyTWl3THVxc2FQblozSGxiOWpwZXppTjMybnpsc1FZbWZNekNLQUxMSmUzYUpBeklSZDFEOW5FbDZtRVZMbjhBQUxqaTJWSzRna1lxbGFyS24tRG81QTFWQ3kyU2x5TGtQZmR4cDRzUHdpMDdZQU5ZSmNEZ1BsOF9ybWFyN2Zka1ltVlhTMnRBdDl1Qk5lZGhPUXVTdGlrcDRMbWVESG5Pb2l2Q01ja2YtTUNFUVZnTVoyb3gyNE1yODI0RVktRTNfNGhpbFRZOEVoemN2a3dsdlpMUmx2RldicFBuWlEwVnpveXVXaXVELVdJQVgzZ3M2T3M0TUxMMmFtWWtQbGMxVVdwTTdVSnM3YWNLS09YSF83VG0tYy1lTmtWSXlWWFM5VXdyc05aOHY3allYYlMwTkxMXzFwX0lLN08xd0NCNTk1Z2tkT0JLelBjUlVkZ2tyTjZoVmgyMzlJelBDeTVxZ1dJSzJOR3A2VkdzVlhMVVdheElzUHpoYnVyTEg5djdheU12R29pSVY1aVpfMGFqUVhoNFBnVTJDT1JNdHB1SlRsbHJHdFdPdEFGS0FPSnV6M3hzaEJlUDllR3kwS3Rnb2dMVUhBNWZtUkJHX1gySHJyVWY4UXNPWFBic3pYa1k3eWNGcjhZdTloQVdVbDUyckdjU3hjWWMzQUV1bE94QjFqRWM3M3hIWDZzUlAwd09RVlZxZXdoWkJuVktsQVZkY21OZGhheWZPWVVUZTVhYkFFNW9iXzYxVWd2QnNDZ0VETFZ4QkN6b2J6UGpHdWxZc1VVaFM4bTRnM2tQOUQzZ3A0Z3BZOHd0ZEU0WF9BR3UtTzBEOXI2bnlKdFlNeEpJeFdrWEtMN1MxOURZRl85d0pJSTFiZ1A4WFNQWnpqa1NDZ0tINi1uZlI1TXM0OG4xTDEwTWp4bXhneUI4Z2t0TTkxSTRGWHNOd19aNHZ4Nm1zdWM4TXU2bjYteUFqVnFKclJhLUhmZUl2dmNHRU01V3VOdnl4X1lLcm5OeUE0d0FzTXJoR1VfMEpuR2htY1cxdG5VWFZYcTFUMVlKdU5NbWF4bENWSURlNTJjXzY0ODJidGxPVDA5UGNoRVNlY3N3b2xOREM2VGNLdGFIb2YtcUlQeW5WRm5qYWVIYzNBb3A3M01UZlF1RUxOUDJXQzBnY3MtLTA2TjVLYVlZcWNoXzZDY3EtWDJuc2pJZVJWeEU5YjQ3aVBMX0ZocVZCMHNQZHozbFlkbVJNZDlBOUpuaUhjellyMFd3TlBjczUtei1sbmw5RE80T2dmM2ZBamZfZHprVUxnNUtaNW5Ub2xaVkU4Q0ZVQzlLN2cteWNrLVZCbmhhU0tqMEc4SEtpcm56ejBTODlNc3pTTldianUyVlVKbzZ3UlZhLVdsNzlqeER3eEZDckJuVTRraUpNTjNfaTRzWE1ZRjFPNm5ZMWdLZ0ZidmdhRWN1cWxDS1JpRHBCS0EyZy1lWVJieXNnYzB6MWlHMzBZODNjMTJfNTJqcTFYRVRRV2J4ekhhTU5mTm1lVW1XcWFONFVkdGZkWTlFalVJN05nWXNLMHRGMVBmbU1JTEk2TERLVjFlN0ZwUXppbzZKM3FHbzY0QjEzWkZCSzhmdGVTMVlkblBaRkNkUzNSTTRNNTVUUnBDa2RjbUgwc210V0ktWk05WWx6M3FhVzNvdFd1dFo1VXFKOEZ2bHBFVGxHWFpvS29xNlJPSjhJTjB5NEIxTmt2Y2xuNnFyYVVHYlpFdEFNS3ZiUHhuUjFuakF1SHhESXl0OVNKX2VKN1IxUDkzempVa01HR3FpY3JRamoxNUcwbzNXS1lrUlpQSFdIZ2ZMQXlZdUZqV2drUTB1NDBrbEtid0N4S0tXbFMxTk1CdkE1Vy1oZEhmUlZDWkVjdEdDYURLT0tfTUlKMFlOdkI2MTBJVFZ1ZUFMUU5zdGk5b211eUxxQmMzb0lxUEVBZm5sbUZybnd4VTFkQU9aZWZTaGNkUjFTVWthcGJ3bFhOMHg3SGdtM1ZFLVZqRzJSSHpSSzlLbE9Gckpqd1JIY0NxWjV2MzhUSy1LSVB5Q1JUTkdUNUVxMjlzN0ZLQW1hOVZSanZpazBhdHExU1VyQ092SzBjQW9HUVRzVk5qR1hiV0NURUxfSEZNb2V4NEk3cGFwZUF3TXp3UVVDalcyVGJlTGdKTVFWY2ZObGFQeTB1S0VyV0hLcnEzUXF3WmhVT0gxWVA3SkJNbzZ0dUk2TGZWcXNoSExIT2c5UExTd2lKcHZaR211ZkNwbm1XZS1TRGM4MDJJZEx6VFlPZEMzendnejVITXpqaWdtbTRpTmkyaUlyVVpjOVNWWjRWOGFyZzNsZ2haRHdaQU9NZDI2ekZXMmdmZVNzejZFTnVZblRETHFEUVpORWVIaERGLVlldkEwQmdnVUtfWkpTZFhsTUVTdjhFUDVxTGJ3dnRXaW9PQ3FqbkptcEZaWjBobnFqZDRUYU1kaEtQNUpzT0VkbUVfVzBONGhncVRNbGlhVzRHXzZTTzlJaUVuRUJ2RGs5d0ttWmJFNWJWajk2OVNYcmVoRnJMS05WX2tkWVN6SElYeUJ0ZGRqR1R3bTRoWGZWRzhIWWlsWWpWVkRCaEtpd2s3YTRHbzVWU0diLUxvd2ZCOG53ZU1uTEVOSXctVGJlcHg0WnBPVktzQWhYX08xeUJaNnRoOTBvOUNCYlVwZTFab1NGSEpqYjQwQkxoMTZ3RVdwc3gyQ3JNRUhUVkZhV0VwaUtGMVVaN1drNG5fcVF1QXZJa2xZc3BKcHZFRUZnODlzLW5ZTVktM3FQTDJBdDduVUNRbTlfS1dYR2VWVlpBdU9IQktzOU56T0ZsdmhaYk1mekxMd2NkS3hENF9MdFVCVDFYZzlGS3dZZ3BQT2phWHB0Wk1PMWpEY0JzLUZRMk12Qm5jTkVMYnRibDJZRTNmS0dkZWZndDZJckVkcWVzMlhNTGh6RnBVdmdGTGNsMVQwUmhSeDlmbld3bnBWNzJsSk92WnBYaXR5UW1YMllBdnBfOXNwMXdQVGhMR2NGbWJWa25aS3NudVNkQlpOa1A4ZG1TZUVLWnBiTi0tZlc5M1BISFBzU290V2VmbTVtU0M2UDlMZWJGSEVHaWlPeFg2MktnbHZRdWRyWkdlYnRCT2tJMHlYWmJWVWNLUjFQRHZPTF8xMDhpQUJTVi1wdktvT3JLZnZHSllhZlJ2eEhjdGJUazRhWW9MQV85VjR3QUplWFE5eW9Lc2QwWnF2REQ1ekc2TjJHRDM5U3dKR1IzUWRtYnpvTVBjMDBudWZYYlN1dmViLUlqVlJWdXJfUUtMTDdqLWFTdTJtZnNuX0ZTR0psb1ZpX0lZejBBeU5rSXFGc3ctOFgzZUcyWXJrZzFZazJIeU53azNTaUVVU1JJdUxoQ1dyTHF1NW5nMDZqVkVKWTBKb0JFNXN5QktYTm54XzFBUzVxZlgwVHhUak96QUNDSWZqd1NyVTRFUkJ5aW02dWQ1VFhOVTZIOWJqZWxXYkJVLU5GVV9yM042NTV6d0xpME9YSjY5MENvTDZNNVRjOFBXeG05SEZEdlhxNnNzWmM1YVo2OVVvTnl5WnRmc3dfdXlySTR5QVU5Z2ZkRDVCenlIdjZyVGsxRVJQLVNwYXpncDk3eGVZQklrSmxaUmZzdnlLLWw2VmpRZ0UtdGZhdlRGUVViVWxMMFpjTEFTS2tiVmFpWU94YnowWXlDMDI2MWVaejZ1N0N0SVBra19vWHhGSFl4bno0UkdoOU9za2tCUnlWWGpnaUI1cVFYc3V1N1ZzMWRub244YWhITkFWaUdGYWhCWVd4Qkt2ZlRsZ0k2X3NPRHdGSnpOV2lFYlhTQ3FXclVFTkNCb3drZFpONkgtMG1Wd1RzOFBCbWxiUGx1WGlYRUhzRkpNby1mS29NMVFBd3NET0tGMlFMaWdIMUIycVBydQ==) # <-- Put your encrypted keystore file here
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmd6R0RfZi1yMldEdHZKVkdHWS1DNFJrQkprWnhReU83MW0tV1VWbVlVNDZId1JOaXZxOE0wQkJtcEhzUEVnc3JmNDJKU0k1eUZiUHEtY1JpQzNjdnJJa0RZeUE9PQ==) # <-- Put your encrypted keystore password here
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmd6R0RfZi1yMldEdHZKVkdHWS1DNFJrQkprWnhReU83MW0tV1VWbVlVNDZId1JOaXZxOE0wQkJtcEhzUEVnc3JmNDJKU0k1eUZiUHEtY1JpQzNjdnJJa0RZeUE9PQ==) # <-- Put your encrypted keystore alias password here
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmd6R0RMR3g2b3JaMHdTN195MjBqX2FHejBhdTBiWkVDRXE5bWtCMWg4OGRRRGlaMGQ1WWp1a2I4TEVqcGRHYnM1SG1DbHNrZmVkcFRGXzg2dGVnblEyLS1wa2c9PQ==) # <-- Put your encrypted keystore alias username here
      node: latest
    triggering:
      events:
        - push
        - tag
        - pull_request
      branch_patterns:
        - pattern: master
          include: true
          source: true
    scripts:
      - name: Install npm dependencies for Ionic Capacitor project
        script: |
          npm install
      - name: Set Android SDK location
        script: |
          echo "sdk.dir=$ANDROID_SDK_ROOT" > "$FCI_BUILD_DIR/android/local.properties"
      - name: Set up keystore
        script: |
          echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
          cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
          storePassword=$FCI_KEYSTORE_PASSWORD
          keyPassword=$FCI_KEY_PASSWORD
          keyAlias=$FCI_KEY_ALIAS
          storeFile=/tmp/keystore.keystore
          EOF          
      - name: Update dependencies and copy web assets to native project
        script: |
          ionic build
          # npx cap copy # <- use this is you don't need to update native dependencies
          npx cap sync # <- update native dependencies and copy web assets to native project          
      - name: Build Android release
        script: |
          cd android
          ./gradlew assembleRelease          
    artifacts:
      - android/app/build/outputs/**/*.apk
    publishing:
      google_play:
        credentials: Encrypted(Z0FBQUFBQmcwN1NYWGF6cG96aWhaNlBKQXBlUUxnZ3JqaXVxZkRkbmxGUnZxM1pBNlFONGYxV3k5dU5KR2FOOVpBbXl4RkRkM21ld1AybG9NTnVIZjZJdkRsekhoSW5WSGs0djVZMUJGTWFkQ0lKWjhPNUVBNE52c1VITnNSUzRuVkxmTzUxVi0wWEpaOUdicUFGS1Q0VUxWZXJMdlNEcnFBMlFzMlRNS3BfcGVTMjhtN3d0RXlSb0JaNHMydUFOY2o5OUhzRVZXMFhzTWsyZmVfS1MybUZPY2hhVlAtUzVlTEotN2wyLWY0OTdaZ1J6NDI3bmhXVzJCSUs3YjBDbDdERFNxdmkyR05DSXV1d3l3UUNyeF9feURjaWJHTnkzcTJVdm9pcGNxR01fLTh4OWduMkV6NlFSVVZpTlhpcVF3S1c5NV95SUZTVmJ5QzJtRE82ejhZTmltRUE4a2JQaGpVYk1zMmhEbkttT0JoVndnSjNTd1lmV1FjZEpmY24teTJCSXpHeFZ4aFNvTEg0cTJPR0lRMW5FWGpNOTdmQmczdkJLWERyWjBxeHg0dF9tU2UyTnAtZVptdHNLVEk3NTN5cldhMGZsSjFwdm15S2lVS3dNUnpwelBIWE1xZDRhN0RSQ3hHSHlTWjhjNDdzOVdDam41Rm9JTEROOGg4Sll0QllIOFdnSGdMd1BGSzJtaHlDU0NGc2JMY2ZkSHlSOTRORTBFaDR5T0tUODFnQl9QMGFTNWlvTEptVFI5ckVGSjNQV0RldU5yT01FVUptTm01U1RubERTWTd2QkRycVFsRUtmdFVaYTFydG85LWdCRmFmWkZ2a1Z2dnpWbU9oT05EZERTWDliMHZ2VTBDLTBVRkFQalNFaWREbEhnQ2ZNUWUyNDRnLWZsN005SXJNZnpSM2t3QkJjbHMxUk9ITlZNZDN3S3RmajdMZWpzOGtLV0lFNHZmZmMxOHYxR29vX2RxSmRHTGMxYlBlMlFqX0pIMzlMOWMtTm0yTU9vSlhIQ0gzMm5tUHVOQ0w0cDVCTkRBYU9FVmdoS2N1OHNJcjVxbUlBWThtUWdiRl9ab0xuNTc0WjRveFpBVkFWeURyQVVVUDBhTHNDZUZ6aWh3QkxqOGZncmdQTDZ3NzhTS0Rrc3EtbHRTY2JDbnIyR3phcndzeVBqVFVZRV93V2xGOEFOX1RsQnBvX3o0R3liLXMxMW1EakJpS1lXZDIwUWJ6Y28zbGQ5VEJoUjV4YU1YVFRSZjhKQS1CTUN0S3ZWb0NqZDBCcVJyTGo2VnplOG9DbXVfUktVc0oyU01RZWFCNlFWSVVLS3FDN201QzFYbXRkcV85ZEVyamxyTVNZMTc2RHlLVFNRajJ1c2Z2S2VmU2xvSXRVMFNaQmIxOUI1UEpCUFMtdVdEcHlhNlZIMlBqX2V6WGtLZGp1NkVNOGhOQmhnZVBRekh1NjN4cVduakUtOUhIS0wxeVNYaXo5S0dpTVVjTm9DVVVfVW5UWkNJb2xjWHVocjBoLU9ycDN2YnZaRXFSRWRoUHhSMUJ3eWpoNjNUc3V5YjhwaEgzaEttVDN4NFM5bHZ1QlRjZ0hhcjNhY1d5M3RUSDh2V2lXNEpseERGYnl6Y0NyYUVRTVV5aDVVRms0MEViMzc3OFZpb0VhX3RxbWRqc3YwRV9Za2h1Wl9iTlZ4NmhDLXQ1aGFFUE50d1l3WkxhMHlvME1hM0J5OVVTbnZfZmdtZU05RzA5U2J6ck9zQ2V2UGY1Vmpfdk40Ymduak9iUW5oLU5vc0p0S25JMWJSUk02VUtJZ05JQWZaLW5maWpSVUFMVjgxb3l3N2gxM09QYlRLdWZST3ZfLUZBbElfZG1HcmVXb0k0OHhpa2xNTk53QzJwUmtJVGF0RHVINXRNVXFqbFhOS05hQngwaUFXamtXdEx5a1RSREgwaFZzWE1QQjAyNElIOHRrREN6aEFSU1hncWlYUlIybktyNVVndmEwTmVMVGhvRGg3bVZycGl2QzdmS0duMWE2YnVjRVhJWUY5dTNBVFNGZlhQZ3JLVHNnRUZKZFpxcy15WGdnZndoMmk2VUt5V0NvZVFSa3F6QThFV2M3cTBtTE4tYTJmSnJacWx3aWRZaEpFejg4RDU3dUVxSEpDN3hqU09TajNDcW5tVkFPTTdCUTVoOG1NOXBwSmo2MlAxaEJjVl9QY0QxWHF1WE5VdlU4RHN6bVBkUWExMGl3b0wyTml6bm1KQTRETW5QV0ZoRzNXbEI4VGIySlpEX0hqT19aMzZuTGxiMzk4enJDeW4zUkFOWnctc2FJQlZONEZtUl83YlJna2IyNUlyU19wdTQyc3RyYzhHRjI2NjRQcnhyak5ZNnotYVhsek50SFZVeVJxX1N5bjRtVEZrU19rcU43a21hVEdqVlJsSkhGMjk3bnF4aE0wRGM4cm5YSkYybGdLU0tiS0JCZU5sNW9saTRmbkFJZzFxMHUtbnIta2hpUmdwbE0yMUJPcmdFVlRfZC10dS1yOUYyWnB1bmN6ZWY0NmxvbnZ0Q0tQaHhKaHpVazNfSXhLVXJTYkk4MmdPRHJueGktY1hrRmZYRjFQNTkySnVqcV8za1JkRzhsRWwyMzVkMEg3cy1jVlRqaHlUTlkwU0EyNzNncWFTeE1RVFJreWU0N1ByR29BdTVxRWc0ZEc5ZFMzSE1TMHNJT2NQY25fRHc5UktzdDV2N3A3NUNhN1Ffb21vdmV2MjAtelZZZVFUdm9MMm4xY2wwSUhxSk5PbVVnaEc0SzFsVlRlQi1RVVdiSGpxeFZGdEtqTlFTM3l5OGJhY3U5QmF1R0JYTVprMG5senpLZjliek8wQU9aSFU0dkpzXzJKcEdZQ0p6S0g2dzhyeURDZ2xLSUJxclNuTmkyZ1dYdjE1WEhCNlhjNm5vWUptbjQ1M1JQeGxRYnF2MDlpN0JTVHRRVVlvN2VnRENiQ2wwVFZIcTdpNktvcTBfeXc4SmJVVjR5SzQ3NUlwa0NaaE1HWGRkZm53V0Vzdi1qM3NJdDhxU1UtdmFUMTZoVHpsZVY4NE5oMHF0cjhqeE5PWVZQeVZqQkZCWlQ5b25vd2xvZ0ZuWlpydzF4TU5LemNpVUR3UE9BQ2NiUW5LWUc2QjNkN2ozTnpHMDIxNzlVRFNydHlsNmxjQmI4cENQUXpMTDRCYm43N2hsOC1hMWVtRnlJUEs1YzVKdzZXbWd4Ny1VUHgySVdtU1Fuc01jaDJ0NU5HRGNFQWZBMWRFQ2x2MmhkWGxfSzkwMHRuRlJsR1pNeHNlcmt3M2lGbzVyYXdmN29NUkhGd19rV2llZ2w3OFRrZkpkcDJmN3A4WTk2cldiV2FJZzR4UlRHVzM1djk3U1lsd0I3LXR1Q2dOaXRaM0dUZWJIRHdTdThaa0R4aXBTUWpiaEZRSDhRSG1nc3gtZmJ2N3BMaG1VcmVRMVpuNngtNzRlX1l6YkUyZHEtNFJKcHZwWHBQN3hSc2x3RWJ5bEw4bjRmQ2xVdnVmRnpwQldJS285b0Vxbk1GSDI3RGJhRHBRR01TdWdVN05VS2FubUpNY1pFcm5KOHNDa1dYejVHZ1ZsVlFkb2tUYmVZelcyMlptTmktZk42b01xQkk2RjVIRlYycWhXdGxXSnZUR0hram8xSk1yd0JYUjlrc3N1bFJ3VUJIclEtTy0tbXhOWFNjbVdzVGc5NkljU3FvM2RxTWxtNURWODN4ODNTUDV2Y0Q0dWIwcDJvQk0zNHlOaXRsWHotNE9pRVhxMzJOVVJKVEJaWUlqMGR5ZHp0R1BnYTBwam9SaU9QR0h4U3E4a0VzcjhwenB6VGZWLVRxa19uX3RZbEFQWEhicG1TOTh2c2lKdUN6TnlNUU15ME9QMktXNWJjcHRQb1ZMQXlFbWRoTFhNMS1XMDZjUEROcTNWZEV2d3M5Vks4SkI3OUY2emc5Wk9rTFA5NndoaDZ6MkFpMEkwaGVJNGJRZHhuQWR1Y2ViSXVCZzBfUWNFYjRCckhEUzdoVmx4ZHRWRkc2ZjZVSUlTYjlEVmIxcEwwUnAxV2JiR1FmUWFmeHlTWlNId1p4Z0hQaDFicHFuSGtKWndlRWZkZjFSTldQZzc4UFF0S3hKOWNNRlFJYldJLVRDaHBZVzh5VFdpVy1OYTZaZHh2Q0tiU0lBeGlMMDJhVEdKek9CN0VycWU4a25nX05iOEpfbEFCLXpSZGNJOEtVTFdwTjZsQjR3R1hIejBZTnUxVjhuODNPcDJMeUdOZmhfVE5jWDJSaUhvTGNOQUJLV1pKREdQTzMyYXQwc0dRaVFGV21qTWVKMVhINVk5SVg5cnRjQUs4SFh1YmtJZVRBTGhPSzNoRTlCbE5PREpJQVpoRWpYd1hKZmZCWmktUE5Edmp1bXFDSWxncFJBdjJnN1FEdVJMY2k1czhZMFNKRVplM3JoMmJfd2M1NGw4SHFCeXJ4bFNlMm5rYWhYZWU2eWpIRHRuNjdMOEcta2ZpMktSbXliOC1idVU5YnAxTVlweG93SnJNLXdkTWF6RTJ4RWdKVVltYVVuVVl0MktxTXc2bGFRQ0NaWnlxVFNFNFFkYUtNS2RRdjNCV0hkNUZ1MmR1YnVHeXlrNzJ1UzBIRTJNYlY0dW83b0h1V19SS1ZEd0kzQ2FHUE9ud0xDOXN4b0FQd0tlblliSlV6S0RvZFRuNmQtZ2d1MUZvbEZpR1dRMWVIb2tyT0lreTBndXVmZGNody1lczVOQTVaZlJmRWRhMEo4bDVZbVFmUlpMbkxTR1FDTmNBbWhLZ2hzREdmLVBpY3pGdVZySXB0RzR0ZTVCSG1GajBabEI4Rk02bThSM2hsMFk3aXgwakFGRDcwazBMUUxhN1hxUUV3NFVyVTFuTlpGYXV0ODgzYW5lYWJBVUxNdFJRTV9fU2NvaC1QTVNGQk5YNlNOd1pJWE9GUnJoM3B1djR2azFNSEVYQ19fdDVMa1BDbnNpYzlhTUdJVG9nTUNXTDVqUGZSVUM1SkhiUFRjLXRRYjgwTUpTaGp6ajJRWkxlVXF3NC1RVWhUcm53MWVrUG1yNFpiREk3ekhEeDdtY21KYi1aMjBlcm9xSmYyWDVYcXRXdzZxZHB5NEJ0Z3F0VGRhQmlYUzdZeWJfclhUX1BfLW84bm1JSlR6WWRoRkJIbjZiNno5OUpvV3F6Q1E1S3BMSFFJQkFGaDRuR09XT0hLb0tRSnBXaTY4bDEzNUI4Y0xRRm9EVnB0ME5FUHZ2YWNSdUUyWlUxcjlnSERKcmp1NGVSSHlSdG40ZzlsVW42VUd3MmN3Z0QzTTFJZnBRQmtCSXNVUlFsZDc1NFBveUVxT2N3bHk2VEE2TXpjQ0Y2YkRyREhQTWxOY3RHekI1dnZWcWE4LXMzc2FMdFN4eUZ3M01SQ2RWYTA5U1dvR1Q0NER5SWFKcFV1V1JWZTB3TlNMajF0ZWl0WlF6REJUdHl0ckRnRVpzY0xoMHl2WjQxMC1vYTFUNGE3N0hJbGUxUWQ3LW5sRlVCYnhnbTNpd083LVZOVXdaUnRBN00yeUNaWVVOQWd2UExVb1l2Z1JaNDNZVEcydzZSc2lELXpzUG42eWhLVkppT1c0TXFmM096WUVqd1FQREdfQlZpMElRSHdORTlpTGhhVzJBZHZQR0Z2OEM5MzJ4cnlPNl9kdjE5SlZpNjNiMDZyRG9pakVrV2lyTUtPM2lDRF9DR1dmVw==) # <- Put your encrypted JSON key file for Google Play service account
        track: production
      email:
        recipients:
          - julien.ramard@gmail.com
        notify:
          success: true     # To receive a notification when a build succeeds
          failure: false     # To not receive a notification when a build fails

  # ionic-capacitor-ios-workflow:
  #   name: Ionic Capacitor iOS Workflow
  #   max_build_duration: 120
  #   instance_type: mac_mini
  #   environment:
  #     vars:
  #       # Ionic Capacitor Xcode worskspace and scheme
  #       XCODE_WORKSPACE: "ios/App/App.xcworkspace"
  #       XCODE_SCHEME: "App"
  #       # Manual Code Signing
  #       # FCI_CERTIFICATE: Encrypted(...) # <-- Put your encrypted certificate file here
  #       # FCI_CERTIFICATE_PASSWORD: Encrypted(...) # <-- Put your encrypted certificate password here
  #       # FCI_PROVISIONING_PROFILE: Encrypted(...) # <-- Put your encrypted provisioning profile here
  #       #
  #       # Automatic Code Signing 
  #       # https://docs.codemagic.io/yaml/distribution/
  #       # https://appstoreconnect.apple.com/access/api
  #       # APP_STORE_CONNECT_ISSUER_ID: 5a451239-51eb-10b6-bfcc-60e61ddab13c # <-- Put your App Store Connect Issuer Id here
  #       # APP_STORE_CONNECT_KEY_IDENTIFIER: LY55E1G322 # <-- Put your App Store Connect Key Identifier here
  #       # APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(...) # <-- Put your App Store Connect Private Key here
  #       # CERTIFICATE_PRIVATE_KEY: Encrypted(...) # <-- Put your Certificate Private key here
  #     node: latest
  #     xcode: latest
  #     cocoapods: default
  #   triggering:
  #     events:
  #       - push
  #     branch_patterns:
  #       - pattern: master
  #         include: true
  #         source: true
  #   scripts:
  #     - name: Install npm dependencies for Ionic project
  #       script: |
  #         npm install
  #     - name: Cocoapods installation
  #       script: |
  #         cd ios/App && pod install
  #     - name: Update dependencies and copy web assets to native project
  #       script: |
  #         ionic build
  #         # npx cap copy # <- use this is you don't need to update native dependencies
  #         npx cap sync # <- update native dependencies and copy web assets to native project          
  #     - name: Set up keychain to be used for code signing using Codemagic CLI 'keychain' command
  #       script: |
  #         keychain initialize
  #     # - name: Set up Provisioning profiles from environment variables (Use with manual code signing)
  #     #   script: |
  #     #     PROFILES_HOME="$HOME/Library/MobileDevice/Provisioning Profiles"
  #     #     mkdir -p "$PROFILES_HOME"
  #     #     PROFILE_PATH="$(mktemp "$PROFILES_HOME"/$(uuidgen).mobileprovision)"
  #     #     echo ${FCI_PROVISIONING_PROFILE} | base64 --decode > "$PROFILE_PATH"
  #     #     echo "Saved provisioning profile $PROFILE_PATH"
  #     - name: Fetch signing files
  #       script: |
  #         # app-store-connect fetch-signing-files "com.nevercode.ncionicapp" --type IOS_APP_STORE --create
  #         app-store-connect fetch-signing-files $(xcode-project detect-bundle-id) --type IOS_APP_STORE --create          
  #     - name: Add certificates to keychain
  #       script: |
  #         keychain add-certificates
  #     - name: Increment build number
  #       script: |
  #         #!/bin/sh
  #         set -e
  #         set -x
  #         cd $FCI_BUILD_DIR/ios/App
  #         agvtool new-version -all $(($BUILD_NUMBER +1))          
  #     - name: Set up code signing settings on Xcode project
  #       script: |
  #         xcode-project use-profiles
  #     - name: Build ipa for distribution
  #       script: |
  #         xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
  #   artifacts:
  #       - build/ios/ipa/*.ipa
  #       - /tmp/xcodebuild_logs/*.log
  #       - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app
  #       - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
  #   publishing:
  #     app_store_connect:
  #       apple_id: yourAppleId@example.com # <- put your Apple Id here
  #       password: Encrypted(...) # <-- Put your App Specific Password. For more information visit: https://support.apple.com/en-us/HT204397
  #     email:
  #       recipients:
  #         - user_one@example.com
  #         - user_two@example.com
  #       notify:
  #         success: false     # To not receive a notification when a build succeeds
  #         failure: false     # To not receive a notification when a build fails
